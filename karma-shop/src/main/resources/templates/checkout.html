<!DOCTYPE html>
<html xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      xmlns:th="http://www.thymeleaf.org"
      layout:decorate="~{layout}">
<head>
    <title>Checkout</title>
</head>

<body>
<div layout:fragment="content">
    <!-- Start Banner Area -->
    <section class="banner-area organic-breadcrumb">
        <div class="container">
            <div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
                <div class="col-first">
                    <h1>Checkout</h1>
                    <nav class="d-flex align-items-center">
                        <a th:href="@{/}">Home<span class="lnr lnr-arrow-right"></span></a>
                        <a th:href="@{/checkout}">Checkout</a>
                    </nav>
                </div>
            </div>
        </div>
    </section>
    <!-- End Banner Area -->

    <!--================Checkout Area =================-->
    <section class="checkout_area section_gap">
        <div class="container">
            <!-- Error Message -->
            <div th:if="${error}" class="alert alert-danger" role="alert">
                <span th:text="${error}"></span>
            </div>

            <!-- Coupon Area -->
            <div th:if="${appliedCouponCode != null}" class="cupon_area">
                <div class="check_title">
                    <h2>Coupon Applied: <span class="text-success" th:text="${appliedCouponCode}"></span></h2>
                </div>
            </div>

            <div class="billing_details">
                <form th:action="@{/checkout/place-order}" method="post">
                    <div class="row">
                        <div class="col-lg-8">
                            <h3>Billing Details</h3>
                            <div class="row">
                                <div class="col-md-6 form-group p_star">
                                    <label for="firstName">First Name *</label>
                                    <input type="text" class="form-control" id="firstName" name="firstName" required>
                                </div>
                                <div class="col-md-6 form-group p_star">
                                    <label for="lastName">Last Name *</label>
                                    <input type="text" class="form-control" id="lastName" name="lastName" required>
                                </div>
                                
                                <div class="col-md-6 form-group p_star">
                                    <label for="phone">Phone Number *</label>
                                    <input type="text" class="form-control" id="phone" name="phone" required>
                                </div>
                                <div class="col-md-6 form-group p_star">
                                    <label for="email">Email Address *</label>
                                    <input type="email" class="form-control" id="email" name="email" required>
                                </div>
                        
                                <div class="col-md-6 form-group p_star">
                                    <label for="country">Country *</label>
                                    <select class="form-control" id="country" name="country" required>
                                        <option value="">Select Country</option>
                                        <option value="Azerbaijan">Azerbaijan</option>
                                        <option value="Turkey">Turkey</option>
                                        <option value="United States">United States</option>
                                        <option value="United Kingdom">United Kingdom</option>
                                        <option value="Germany">Germany</option>
                                        <option value="Russia">Russia</option>
                                    </select>
                                </div>
                                <div class="col-md-6 form-group p_star">
                                    <label for="company">Company (optional)</label>
                                    <input type="text" class="form-control" id="company" name="company">
                                </div>

                                <div class="col-md-12 form-group p_star">
                                    <label for="addressLine1">Address Line 1 *</label>
                                    <input type="text" class="form-control" id="addressLine1" name="addressLine1" required>
                                </div>

                                <div class="col-md-12 form-group">
                                    <label for="addressLine2">Address Line 2 (optional)</label>
                                    <input type="text" class="form-control" id="addressLine2" name="addressLine2">
                                </div>

                                <div class="col-md-6 form-group p_star">
                                    <label for="city">City *</label>
                                    <input type="text" class="form-control" id="city" name="city" required>
                                </div>
                                <div class="col-md-6 form-group">
                                    <label for="district">District (optional)</label>
                                    <input type="text" class="form-control" id="district" name="district">
                                </div>

                                <div class="col-md-12 form-group">
                                    <label for="zipCode">Postcode/ZIP (optional)</label>
                                    <input type="text" class="form-control" id="zipCode" name="zipCode">
                                </div>

                             <!-- Ship to different address -->
                                <div class="col-md-12 form-group">
                                    <div class="creat_account">
                                        <h3>Shipping Details</h3>
                                        <input type="checkbox" id="shipToDifferentAddress" name="shipToDifferentAddress" value="true">
                                        <label for="shipToDifferentAddress">Ship to a different address?</label>
                                    </div>
                                </div>

                                <!-- Shipping Address (hidden by default) -->
                                <div id="shippingAddressSection" style="display: none;" class="col-md-12">
                                    <div class="row">
                                        <div class="col-md-6 form-group">
                                            <label for="shippingFirstName">First Name</label>
                                            <input type="text" class="form-control" id="shippingFirstName" name="shippingFirstName">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label for="shippingLastName">Last Name</label>
                                            <input type="text" class="form-control" id="shippingLastName" name="shippingLastName">
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label for="shippingCountry">Country</label>
                                            <select class="form-control" id="shippingCountry" name="shippingCountry">
                                                <option value="">Select Country</option>
                                                <option value="Azerbaijan">Azerbaijan</option>
                                                <option value="Turkey">Turkey</option>
                                                <option value="United States">United States</option>
                                                <option value="United Kingdom">United Kingdom</option>
                                                <option value="Germany">Germany</option>
                                                <option value="Russia">Russia</option>
                                            </select>
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label for="shippingAddressLine1">Address Line 1</label>
                                            <input type="text" class="form-control" id="shippingAddressLine1" name="shippingAddressLine1">
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label for="shippingAddressLine2">Address Line 2</label>
                                            <input type="text" class="form-control" id="shippingAddressLine2" name="shippingAddressLine2">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label for="shippingCity">City</label>
                                            <input type="text" class="form-control" id="shippingCity" name="shippingCity">
                                        </div>
                                        <div class="col-md-6 form-group">
                                            <label for="shippingDistrict">District</label>
                                            <input type="text" class="form-control" id="shippingDistrict" name="shippingDistrict">
                                        </div>
                                        <div class="col-md-12 form-group">
                                            <label for="shippingZipCode">Postcode/ZIP</label>
                                            <input type="text" class="form-control" id="shippingZipCode" name="shippingZipCode">
                                        </div>
                                    </div>
                                </div>

                                <!-- Order Notes -->
                                <div class="col-md-12 form-group">
                                    <label for="orderNotes">Order Notes</label>
                                    <textarea class="form-control" name="orderNotes" id="orderNotes" rows="3" 
                                              placeholder="Notes about your order, e.g. special notes for delivery."></textarea>
                                </div>
                            </div>
                        </div>

                        <!-- Order Summary -->
                        <div class="col-lg-4">
                            <div class="order_box">
                                <h2>Your Order</h2>
                                <ul class="list">
                                    <li><a href="#">Product <span>Total</span></a></li>
                                    <li th:each="item : ${cartItems}">
                                        <a href="#">
                                            <span th:text="${item.name}">Product Name</span>
                                            <span class="middle" th:text="'x ' + ${item.quantity}">x 1</span>
                                            <span class="last" th:text="'$' + ${#numbers.formatDecimal(item.getTotal(), 1, 2)}">$0.00</span>
                                        </a>
                                    </li>
                                </ul>
                                <ul class="list list_2">
                                    <li><a href="#">Subtotal <span th:text="'$' + ${#numbers.formatDecimal(subtotal, 1, 2)}">$0.00</span></a></li>
                                    <li><a href="#">Shipping <span th:text="'Flat rate: $' + ${#numbers.formatDecimal(shippingCost, 1, 2)}">Flat rate: $5.00</span></a></li>
                                    <li th:if="${appliedCouponCode != null}">
                                        <a href="#" class="text-success">
                                            Discount (<span th:text="${appliedCouponCode}"></span>)
                                            <span th:text="'-$' + ${#numbers.formatDecimal(discount, 1, 2)}">-$0.00</span>
                                        </a>
                                    </li>
                                    <li><a href="#"><strong>Total</strong> <span><strong th:text="'$' + ${#numbers.formatDecimal(total, 1, 2)}">$0.00</strong></span></a></li>
                                </ul>

                                <!-- Payment Methods -->
                                <div class="payment_item">
                                    <div class="radion_btn">
                                        <input type="radio" id="checkPayment" name="paymentMethod" value="CHECK_PAYMENTS" checked>
                                        <label for="checkPayment">Check payments</label>
                                        <div class="check"></div>
                                    </div>
                                    <p>Please send a check to Store Name, Store Street, Store Town, Store State / County, Store Postcode.</p>
                                </div>
                                <div class="payment_item active">
                                    <div class="radion_btn">
                                        <input type="radio" id="paypal" name="paymentMethod" value="PAYPAL">
                                        <label for="paypal">Paypal</label>
                                        <img src="/front/img/product/card.jpg" alt="">
                                        <div class="check"></div>
                                    </div>
                                    <p>Pay via PayPal; you can pay with your credit card if you don't have a PayPal account.</p>
                                </div>

                                <!-- Terms and Conditions -->
                                <div class="creat_account">
                                    <input type="checkbox" id="acceptedTerms" name="acceptedTerms" value="true" required>
                                    <label for="acceptedTerms">I've read and accept the </label>
                                    <a href="#">terms & conditions*</a>
                                </div>

                                <!-- Submit Button -->
                                <button type="submit" class="primary-btn">Place Order</button>
                            </div>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </section>
    <!--================End Checkout Area =================-->
</div>

<script th:inline="javascript">
    document.addEventListener('DOMContentLoaded', function() {
        const shipCheckbox = document.getElementById('shipToDifferentAddress');
        const shippingSection = document.getElementById('shippingAddressSection');
        
        if (shipCheckbox && shippingSection) {
            shipCheckbox.addEventListener('change', function() {
                shippingSection.style.display = this.checked ? 'block' : 'none';
            });
        }
    });
</script>
</body>
</html>
